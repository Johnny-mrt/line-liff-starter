<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    
<h1>篩選功能測試</h1>
</head>
<body>

  <script src="https://d.line-scdn.net/liff/1.0/sdk.js"></script>  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
  
  <select id="Station" class="easyui-combobox" name="Station">
      <option value="G01">G_新店</option>
      <option value="G10">G_古亭</option>
      <option value="G11">G_中正紀念堂</option>
      <option value="BL07">BL_台北車站</option>
      <option value="R13" selected>R_台北車站</option>
      <option value="R33">R_淡水</option>
  </select>
  
  <select id="Device" class="easyui-combobox" name="Device">
      <option value="ATIM" selected>ATIM</option>
      <option value="GATE">GATE</option>
      <option value="CCBE">CCBE</option>
      <option value="PAM">PAM</option>
  </select>
  
  <select id="Number" class="easyui-combobox" name="Number">

  </select>
  
  <button onclick="myFunction()">送出查詢</button>
  
  <script>
    function initializeApp(data) {
            var userid = data.context.userId;
    }//取得用戶ID

    function Submit(comboText) {
            //資料檢查
            //if (amount == '' || Type == '' || Type.includes('(') || Type.includes(')')) {
            //    alert('資料不完整!');
            //    return;
            //}
            //組出新增字串
            //var msg = "/add/";
            //msg = msg + amount + "/";
            //msg = msg + Type + "/";
            //msg = msg + Memo + "/";
            //msg = msg + DateTime + "/";
            //把訊息以用戶的身分發送給LINE Bot
            liff.sendMessages([
                {
                    type: 'text',
                    text: comboText
                }
            ])
                .then(() => {
                    //建立成功，關閉視窗
                    liff.closeWindow();
                });
        }

    $(document).ready(function(){
      liff.init(function (data) {
        initializeApp(data);
      });
	var url='https://johnny-mrt.github.io/line-liff-starter/Number.json';
$.getJSON(url,function(json) {
    $('#Number').combobox({
        data: json.jsonResult.rows;
        valueField: 'ID';
        textField: 'TEXT';
    });
});

    //$('#Station').change(function () {
      //alert($('#Station').find(":selected").text().trim());
    //  alert($('#Station').find(":selected").val());
    //  });
    $('#btn_addRecord').click(function (e) {
      alert(document.getElementById('Station').value);
    });
    function myFunction(){
      var comboText='!'+$('#Station').find(":selected").val()+' '+$('#Device').find(":selected").val()+' '+$('#Number').find(":selected").val()
      Submit(comboText);
    //alert(comboText);
}
  </script>
</body>

</html>
  
